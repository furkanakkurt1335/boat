\section{Implementation}
\label{sec:implementation}

Web application development framework \textit{Django}~\cite{django} and Web API toolkit \textit{Django REST Framework} (DRF)~\cite{drf} and Python~\cite{python} library \textit{django-filter}~\cite{django-filter} were used to develop \boatvtwo.
PostgreSQL~\cite{psql} is used to provide a database for the server-side applications of the software.
This database is responsible for serving the entire data needed to operate the tool.
During the implementation phase, decisions regarding models of the database have been directed towards making the tool's UI make use of the API for database queries and searches.
The models reflect the UD format of sentences and annotations are saved as fields of word lines at the core.

The annotation page has all the functionalities of \boatvone\ and more.
Errors are displayed for annotators to see invalid edits in real time.
They are checked and annotations validated according to the UD framework and the language provided.
The scripts used for validation are the ones already provided by the framework as of 2022~\cite{UD-git}.

Python library spa\textsc{C}y~\cite{spacy} is used to provide linear dependency graphs.
Another JavaScript-based linear dependency graph~\cite{spyssalo} making use of \textit{brat}~\cite{brat-vis} is used to provide graphs as well.
The preferences of annotators may vary and giving them options in different parts of the screen is important.

\begin{figure}[tbh]
    \centering
    \frame{\includegraphics[width=1\textwidth]{figures/sample-annotation.png}}
    \caption{The annotation screen for the sentence ``Sel sularında neler yoktu ki...''. The annotator is choosing an annotation for the \deprel\ tag of the word ``sularında''. The valid alternatives pop up based on keystrokes and can be selected via use of arrows. }
    \label{fig:demo-fig}
\end{figure}

\subsection{Features}
\label{sec:features}

There are many new features and improvements in this tool, as well as the functionality that already existed in \boatvone.

\begin{itemize}[before=\normalfont, font=\itshape, align=left]
\item[Treebanks:] Treebanks are differentiated and each one has its own sets of sentences.
Before uploading a \conllu{} file, a treebank must be created beforehand.

\item[Loading files:] Instead of loading a specific file before every annotation session, an annotator is able to upload a \conllu{} file for a treebank to the database.
The file is parsed and checked for its format. It's rejected if incorrectly formatted, otherwise uploaded to the database.
This way, other annotators working with the same treebank don't have to provide the same file.

\item[Annotation view:] The annotation page is very similar to \boatvone, as seen in Figure~\ref{fig:demo-fig}.
There is an annotation table for editing the word lines of \conllu\ files.
It also includes a dependency graph and an error card, both of which are in sync with the edits done on the table cells.
The dependency graph of the initial tool and other 2 graphs have been added to this tool.
The annotator has the choice to select a type of graph or none.
The other 2 graphs, which are both horizontal and linear, have been selected due to space considerations.
The error card displays errors for the current annotation, validating it via the UD validation script.

\item[Network-enabled search:] An important feature in this version is the ability to cross-check annotations by implementing a network for annotators where they can review the annotations done by other annotators and if they disagree on some parts, they can interact outside the tool.
This can be helpful and a learning experience for annotators.

For an actual example, the annotator, responsible for the \bountreebank's annotation, was annotating a sentence that had a Zodiac sign noun.
Not being sure about how to annotate the noun's \upos\ tag, she searched the \conllu{} file in a text editor for similar cases and encountered two different ways nouns of Zodiac signs were annotated previously.
Besides not helping how to choose a \upos\ tag, this raises a consistency issue within the treebank as well.
One of the ways had annotated it as \noun\ in its \upos\ tag, the other one had as \propn.
The annotator decided to use the one with more cases of annotation and proceeded to replace the inconsistent ones with the current decision.
This case can be handled by a simple search of the database.
We provide a search page and API in this tool where treebanks can be searched by \textit{sent\_id}s, \textit{text}s, all the UD tags and treebank names.
With this, an annotator can easily make the treebank more consistent and reduce their frustration.

Another example could be given by the various \textit{-ki} morphemes in Turkish.
In the sentence ``Evdeki halılar yıkandı.'' (meaning \textit{The rugs at home were washed.}), the \textit{-ki} acts as an adjectivizer.
In another sentence ``Benim halılarım yün, Ayşeninkiler sentetik.'' (meaning \textit{My rugs are woolen. Ayşe's are synthetic.}), it is pronominal.
An annotator might not recall how a specific \textit{-ki} morpheme should be annotated, which can be remedied with a simple search.
Annotators have informed us that such cases occur frequently when annotating MRLs.

Also one other thing the inter-annotator agreement allows us is the possibility to see some anomalies in the Turkish part of the validation of the \ud\ framework.
For example, if a sentence were annotated a way by many annotators but the \ud\ validation script were finding it invalid, this might indicate the \ud\ validation were lacking in this respect of the Turkish language.
Some modifications might be necessary and there could be a case for a proposal of change.

\item[Annotation status:] We also provide a feature where an annotation has a status regarding it completeness.
There are 3 different statuses and they are cycled through by the annotator in the annotation view.
Status of an annotation is also shown in the search view, helping to select an appropriate case.
Also there is another view where an annotator can list their completed, drafted or incomplete annotations, helping to keep track of what annotations have already been completed.

\end{itemize}
