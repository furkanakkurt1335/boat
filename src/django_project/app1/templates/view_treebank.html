{% extends 'base-nav.html' %}

{% block head %}
<title> View Treebank Page </title>
<script>
    window.onload = function () {
        window.current_page = parseInt({{ page }});
    $('#previous')[0].href += (window.current_page - 1).toString();
    $('#next')[0].href += (window.current_page + 1).toString();
    $.get("/api/sentences/?page={{page}}&treebank__title={{treebank.title}}",
        function (data) {
            let results = data['results'];
            for (let i = 0; i < results.length; i++) {
                let p = document.createElement('p');
                p.innerHTML = results[i].text + '&nbsp;';
                let a = document.createElement('a');
                a.href = "/annotate/{{treebank.title}}/" + results[i]['order'];
                p.append(a);
                let span = document.createElement('span');
                span.style = "font-size: small;";
                span.innerHTML = results[i].sent_id;
                a.append(span);
                $('#space').append(p);
                let pag = document.getElementById('pagination');
                pag.hidden = false;
                $('#space').append(pag);
            }
            if (data['next'] == null) {
                $('#next')[0].remove();
            }
            if (data['previous'] == null) {
                $('#previous')[0].remove();
            }
        });
    };
</script>
{% endblock %}

{% block body %}
<div id="space" class="p-5 border bg-light">

    {% if message|length != 0 %}
    {{message}}
    {% endif %}

    <nav id="pagination" hidden aria-label="Page navigation example">
        <ul class="pagination">
            <li class="page-item"><a id="previous" class="page-link"
                    href="/view_treebank/{{treebank.title}}/">Previous</a>
            </li>
            <li class="page-item"><a id="next" class="page-link" href="/view_treebank/{{treebank.title}}/">Next</a></li>
        </ul>
    </nav>
</div>
{% endblock %}